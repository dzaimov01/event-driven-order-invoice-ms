{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://example.com/contracts/v1/order-event.json",
  "title": "OrderEventV1",
  "type": "object",
  "required": ["eventId", "type", "orderId", "occurredAt", "version", "customerId", "status", "total", "currency", "lines"],
  "properties": {
    "eventId": {"type": "string", "format": "uuid"},
    "type": {"type": "string", "enum": ["OrderCreated", "OrderConfirmed", "OrderCancelled"]},
    "orderId": {"type": "string", "format": "uuid"},
    "customerId": {"type": "string", "format": "uuid"},
    "status": {"type": "string"},
    "total": {"type": "string"},
    "currency": {"type": "string"},
    "correlationId": {"type": "string"},
    "occurredAt": {"type": "string", "format": "date-time"},
    "version": {"type": "string", "const": "v1"},
    "lines": {
      "type": "array",
      "minItems": 1,
      "items": {
        "type": "object",
        "required": ["productId", "quantity", "unitPrice", "currency"],
        "properties": {
          "productId": {"type": "string", "format": "uuid"},
          "quantity": {"type": "integer", "minimum": 1},
          "unitPrice": {"type": "string"},
          "currency": {"type": "string"}
        }
      }
    }
  }
}
